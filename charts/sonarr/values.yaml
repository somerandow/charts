nameOverride: ""

services:
  main:
    enabled: true
    ports:
      - name: http
        port: 8989
        target: http

deployments:
  main:
    enabled: true
    context:
      fsGroup: 568
      gid: 568
      uid: 568
      extraGids:
        - 997
    containers:
      main:
        env:
          - name: TZ
            value: America/Chicago
        image:
          repository: ghcr.io/onedr0p/sonarr
        resources:
          limits:
            cpu: "1"
            memory: 1Gi
          requests:
            cpu: 200m
            memory: 100Mi
        ports:
          http:
            port: 8989
        probes:
          liveness:
            enabled: true
            type: exec
            command:
              - /usr/bin/env
              - bash
              - -c
              - curl --fail localhost:8989/api/v3/system/status?apiKey=`IFS=\> && while read -d
                \< E C; do if [[ $E = "ApiKey" ]]; then echo $C; fi; done < /config/config.xml`
          readiness:
            enabled: true
            port: 8989
          startup:
            enabled: true
            port: 8989
